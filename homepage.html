<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
</head>

<body>
  <h1>Dashboard</h1>
  <div id="heapUsed" style="width:100%; height:400px;"></div>
</body>

<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="/socket.io/socket.io.js"></script>


<script>
  /**
   * Here is event.js
   */
  var socket = io();
  socket.on('process:change', function(data){
    console.log(data);
  });

  socket.on('Global:init', function (data) {
    console.log(data);
  })

</script>


<script>
  /**
   * Here is chart.js
   */

  var heapUsed = document.getElementById('heapUsed');
  window.chart = new Highcharts.Chart({
    chart: {
      renderTo: heapUsed,
      height: 400,
      events: {
        load: function() {
          var series = this.series[0];
          socket.on('HeapUsed:addPoint', function(data) {
            var x = (new Date()).getTime(), // current time
                y = data.heapUsed;
            series.addPoint([x, y], true, true);
            console.log(data);
          });
        }
      }
    },

    series: [{
      name: 'heapUsed',
      data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }]
  });

</script>

</html>